<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    

<html lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Signing JAR Files (The Java&trade; Tutorials &gt;        
            Deployment &gt; Packaging Programs in JAR Files)
</title>

     <meta name="description" content="This deployment Java tutorial describes development and deployment of applets, Java Web Start applications, rich Internet applications, and JAR related tools" />
     <meta name="keywords" content="java programming, learn java, java sample code, java applet, java web start, rich internet application, RIA, jar, plugin, plug-in" />
        
<style type="text/css">
    .FigureCaption   { 
        margin-left: 1in; 
        margin-right: 1in; 
        font-family: sans-serif; 
        font-size: smaller; 
        text-align: justify;
    }
    #TopBar_bl {
        background: url(../../images/java_bar_bl.gif) 0 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        background: url(../../images/java_bar_br.gif) 100% 100% no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        background: url(../../images/java_bar_tl.gif) 0 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar_tr {
        background: url(../../images/java_bar_tr.gif) 100% 0 no-repeat;
        width: 100%;
        height: 60px;
    }
    #TopBar {
        background: #35556B url(../../images/java_bar.gif);
        margin: 10px 10px 0 10px;
        height:60px;
        min-width:700px;
        color: white;
        font-family: sans-serif; 
        font-weight: bold;
    }
    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    #TopBar_right {
        line-height: 14px;
        float: right;
        padding-top: 2px;
        padding-right: 30px;
        text-align: left;
    }
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 12px;
        margin: 3px;
        padding: 0;
    }
    #TopBar a:visited, #TopBar a:link {
        color: white;
        text-decoration: none;
    }
    #TopBar a:hover, #TopBar a:active  {
        background-color: white;
        color: #35556B;
    }
    #BreadCrumbs {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    #BreadCrumbs a {
        color: blue;
    }
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    .LeftBar_shown {
        width: 13em;
        float: left;
        margin-left: 10px;
        margin-top: 4px;
        margin-bottom: 2em;
        margin-right: 10px;
    }
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    .LeftBar_hidden {
        display: none;
    }
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }
    
    #Footer2 {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;
    }
    .NavBit  {
        padding: 4px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    @media print {
        .NavBit {
            display: none;
        }
    }
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    #Contents a, .NavBit a, #TagNotes a {
        color: blue
    }
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #F90000;
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #F90000;
        font-family: sans-serif;
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }
</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    </head>
<body onload="load()">
    <noscript>
        A browser with JavaScript enabled is required for this page to operate properly.
    </noscript>

    <div id="TopBar"> <div id="TopBar_tr"> <div id="TopBar_tl"> <div id="TopBar_br"> <div id="TopBar_bl"> 
                        <div id="TopBar_right"> 
                            <a target="_blank"
				href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-7-tutorial-2012-02-28-1536013.html">Download Ebooks</a><br />
                            <a target="_blank"
                                href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Download JDK</a>
                            <br />
                            <a href="../../search.html" target="_blank">Search Java Tutorials</a>
                            <br />
                            <a href="javascript:toggleLeft()"
                                id="ToggleLeft">Hide TOC</a>
                        </div>
                    </div> </div> </div> </div> </div>
    <div class="PrintHeaders">
        <b>Trail:</b> Deployment
        <br /><b>Lesson:</b> Packaging Programs in JAR Files
        <br /><b>Section:</b> Signing and Verifying JAR Files
    </div>

    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">Packaging Programs in JAR Files</a></div>
<div class="linkAHEAD"><a href="basicsindex.html">Using JAR Files: The Basics</a></div>
<div class="linkBHEAD"><a href="build.html">Creating a JAR File</a></div>
<div class="linkBHEAD"><a href="view.html">Viewing the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="unpack.html">Extracting the Contents of a JAR File</a></div>
<div class="linkBHEAD"><a href="update.html">Updating a JAR File</a></div>
<div class="linkBHEAD"><a href="run.html">Running JAR-Packaged Software</a></div>
<div class="linkAHEAD"><a href="manifestindex.html">Working with Manifest Files: The Basics</a></div>
<div class="linkBHEAD"><a href="defman.html">Understanding the Default Manifest</a></div>
<div class="linkBHEAD"><a href="modman.html">Modifying a Manifest File</a></div>
<div class="linkBHEAD"><a href="appman.html">Setting an Application's Entry Point</a></div>
<div class="linkBHEAD"><a href="downman.html">Adding Classes to the JAR File's Classpath</a></div>
<div class="linkBHEAD"><a href="packageman.html">Setting Package Version Information</a></div>
<div class="linkBHEAD"><a href="sealman.html">Sealing Packages within a JAR File</a></div>
<div class="linkBHEAD"><a href="secman.html">Enhancing Security with Manifest Attributes</a></div>
<div class="linkAHEAD"><a href="signindex.html">Signing and Verifying JAR Files</a></div>
<div class="linkBHEAD"><a href="intro.html">Understanding Signing and Verification</a></div>
<div class="nolinkBHEAD">Signing JAR Files</div>
<div class="linkBHEAD"><a href="verify.html">Verifying Signed JAR Files</a></div>
<div class="linkAHEAD"><a href="apiindex.html">Using JAR-related APIs</a></div>
<div class="linkBHEAD"><a href="jarclassloader.html">The JarClassLoader Class</a></div>
<div class="linkBHEAD"><a href="jarrunner.html">The JarRunner Class</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">Questions and Exercises</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
            <span id="BreadCrumbs">
                <a href="../../index.html" target="_top">Home Page</a>
                &gt;
                <a href="../index.html" target="_top">Deployment</a>
                &gt;
                <a href="index.html" target="_top">Packaging Programs in JAR Files</a>
            </span>
            <div class="NavBit">
                <a target="_top" href="intro.html">&laquo;&nbsp;Previous</a>&nbsp;&bull;&nbsp;<a target="_top" href="../TOC.html">Trail</a>&nbsp;&bull;&nbsp;<a target="_top" href="verify.html">Next&nbsp;&raquo;</a>
            </div>
            <div id="PageTitle"><h1>Signing JAR Files</h1></div>
            <div id="PageContent">

<p>You use the JAR Signing and Verification Tool to sign JAR files and time stamp the signature. You invoke the JAR Signing and Verification Tool by using the <tt>jarsigner</tt> command, so we&#39;ll refer to it as &quot;Jarsigner&quot; for short.</p>
<p>To sign a JAR file, you must first have a private key. Private keys and their associated public-key certificates are stored in password-protected databases called <em>keystores</em>. A keystore can hold the keys of many potential signers. Each key in the keystore can be identified by an <em>alias</em> which is typically the name of the signer who owns the key. The key belonging to Rita Jones might have the alias &quot;rita&quot;, for example.</p>
<p>The basic form of the command for signing a JAR file is</p>
<div class="codeblock"><pre>
jarsigner <i>jar-file alias</i>
</pre></div>
<p>In this command:</p>
<ul>
<li><tt>jar-file</tt> is the pathname of the JAR file that&#39;s to be signed.</li>
<li><tt>alias</tt> is the alias identifying the private key that&#39;s to be used to sign the JAR file, and the key&#39;s associated certificate.</li>
</ul>
<p>The Jarsigner tool will prompt you for the passwords for the keystore and alias.</p>
<p>This basic form of the command assumes that the keystore to be used is in a file named <tt>.keystore</tt> in your home directory. It will create signature and signature block files with names <tt>x.SF</tt> and <tt>x.DSA</tt> respectively, where <tt>x</tt> is the first eight letters of the alias, all converted to upper case. This basic command will <em>overwrite</em> the original JAR file with the signed JAR file.</p>
<p>In practice, you might want to use one or more of the command options that are available. For example, time stamping the signature is encouraged so that any tool used to deploy your application can verify that the certificate used to sign the JAR file was valid at the time that the file was signed. A warning is issued by the Jarsigner tool if a time stamp is not included.</p>
<p>Options precede the <tt>jar-file</tt> pathname. The following table describes the options that are available:<br />
<br /></p>
<table summary="Jarsigner Command Options" cellspacing="3" border="1">
<caption><strong>Jarsigner Command Options</strong></caption>
<tr>
<th id="h1">Option</th>
<th id="h2">Description</th>
</tr>
<tr>
<td headers="h1"><tt>-keystore</tt>&nbsp;<i>url</i></td>
<td headers="h2">Specifies a keystore to be used if you don&#39;t want to use the <tt>.keystore</tt> default database.</td>
</tr>
<tr>
<td headers="h1"><tt>-storepass</tt>&nbsp;<i>password</i></td>
<td headers="h2">Allows you to enter the keystore&#39;s password on the command line rather than be prompted for it.</td>
</tr>
<tr>
<td headers="h1"><tt>-keypass</tt>&nbsp;<i>password</i></td>
<td headers="h2">Allows you to enter your alias&#39;s password on the command line rather than be prompted for it.</td>
</tr>
<tr>
<td headers="h1"><tt>-sigfile</tt>&nbsp;<i>file</i></td>
<td headers="h2">Specifies the base name for the .SF and .DSA files if you don&#39;t want the base name to be taken from your alias. <i>file</i> must be composed only of upper case letters (A-Z), numerals (0-9), hyphen (-), and underscore (_).</td>
</tr>
<tr>
<td headers="h1"><tt>-signedjar</tt>&nbsp;<i>file</i></td>
<td headers="h2">Specifies the name of the signed JAR file to be generated if you don&#39;t want the original unsigned file to be overwritten with the signed file.</td>
</tr>
<tr>
<td headers="h1"><tt>-tsa</tt>&nbsp;<i>url</i></td>
<td headers="h2">Generates a time stamp for the signature using the Time Stamping Authority (TSA) identified by the URL.</td>
</tr>
<tr>
<td headers="h1"><tt>-tsacert</tt>&nbsp;<i>alias</i></td>
<td headers="h2">Generates a time stamp for the signature using the TSA's public key certificate identified by <i>alias</i>.</td>
</tr>
<tr>
<td headers="h1"><tt>-altsigner</tt>&nbsp;<i>class</i></td>
<td headers="h2">Indicates that an alternative signing mechanism be used to time stamp the signature. The fully-qualified class name identifies the class used.</td>
</tr>
<tr>
<td headers="h1"><tt>-altsignerpath</tt>&nbsp;<i>classpathlist</i></td>
<td headers="h2">Provides the path to the class identified by the <tt>altsigner</tt> option and any JAR files that the class depends on.</td>
</tr>
</table>
<h2>Example</h2>
<p>Let&#39;s look at a couple of examples of signing a JAR file with the Jarsigner tool. In these examples we will assume:</p>
<ul>
<li>your alias is &quot;johndoe&quot;.</li>
<li>the keystore you want to use is in a file named &quot;mykeys&quot; in the current working directory.</li>
<li>the keystore&#39;s password is &quot;abc123&quot;.</li>
<li>the TSA that you want to use to time stamp the signature is located at http://example.tsa.url</li></ul>
<p>Under these assumptions, you could use this command to sign a JAR file named <tt>app.jar</tt>:</p>
<div class="codeblock"><pre>
jarsigner -keystore mykeys -storepass abc123 -tsa http://example.tsa.url app.jar johndoe
</pre></div>
<p>You will be prompted for the keystore password. Because this command doesn&#39;t make use of the <tt>-sigfile</tt> option, the .SF and .DSA files it creates would be named <tt>JOHNDOE.SF</tt> and <tt>JOHNDOE.DSA</tt>. Because the command doesn&#39;t use the <tt>-signedjar</tt> option, the resulting signed file will overwrite the original version of <tt>app.jar</tt>.</p>
<p>Let&#39;s look at what would happen if you used a different combination of options:</p>
<div class="codeblock"><pre>
jarsigner -keystore mykeys -sigfile SIG -signedjar SignedApp.jar 
          -tsacert testalias app.jar johndoe
</pre></div>
<p>This time, you would be prompted to enter the passwords for both the keystore and your alias because the passwords aren&#39;t specified on the command line. The signature and signature block files would be named <tt>SIG.SF</tt> and <tt>SIG.DSA</tt>, respectively, and the signed JAR file <tt>SignedApp.jar</tt> would be placed in the current directory. The original unsigned JAR file would remain unchanged. Also, the signature would be time stamped with the TSA's public key certificate identified as <tt>testalias</tt>.</p>
<h2>Additional Information</h2>
<p>Complete reference pages for the JAR Signing and Verification Tool are on-line: 
<a class="OutsideLink" target="_blank" href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/SecurityToolsSummary.html">Summary of Security Tools</a></p>

<div class="note"><hr /><strong>Note:</strong>&nbsp;When a certificate is self signed, <tt>UNKNOWN</tt> will be displayed as the publisher of the application.  For more information, see
<a class="OutsideLink" target="_blank" href="http://www.java.com/en/download/faq/self_signed.xml">Is it safe to run an application from a publisher that is listed as <tt>UNKNOWN</tt>?</a>.
<hr /></div>

        </div>
        <div class="NavBit">
            <a target="_top" href="intro.html">&laquo; Previous</a>
            &bull;
            <a target="_top" href="../TOC.html">Trail</a>
            &bull;
            <a target="_top" href="verify.html">Next &raquo;</a>
        </div>
    </div>
    <div id="Footer2">
<hr />
<div id="TagNotes">
    <p class="footertext">Problems with the examples? Try <a target="_blank"
        href="../../information/run-examples.html">Compiling and Running
        the Examples: FAQs</a>.
    <br />
    Complaints? Compliments? Suggestions? <a target="_blank"
        href="http://docs.oracle.com/javase/feedback.html">Give
    us your feedback</a>.
    </p>
</div> 

<div id="Footer">
<p class="footertext"><a name="license_info">Your use of this</a> page and all the material on pages under &quot;The Java Tutorials&quot; banner 
 is subject to these <a href="../../information/cpyr.html">legal notices</a>.
</p>
<table border="0" cellspacing="0" cellpadding="5" summary="">
    <tr>
         <td width="20%">
	 <table width="100%" border="0" cellspacing="0" cellpadding="5">
            <tr>
              <td headers="h101" align="center"><img id="duke" src="../../images/DukeWave.gif" width="55" height="55" alt="duke image" /></td>
              <td headers="h102" align="left" valign="middle"><img id="oracle" src="../../images/logo_oracle_footer.gif" width="100" height="29" alt="Oracle logo" /></td>
           </tr>
          </table>
          </td>

          <td width="55%" valign="middle" align="center">
		<p class="footertext"><a href="http://www.oracle.com/us/corporate/index.html">About Oracle</a> | <a href="http://www.oracle.com/technology/index.html">Oracle Technology Network</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">Terms of Use</a></p> 
	 </td>
          <td width="25%" valign="middle" align="right">
      		<p class="footertext">Copyright &copy; 1995, 2014 Oracle and/or its affiliates. All rights reserved.</p>
	 </td>
     </tr>     
</table>
</div>
    </div>
    <div class="PrintHeaders">
        <b>Previous page:</b> Understanding Signing and Verification
        <br /><b>Next page:</b> Verifying Signed JAR Files
    </div>
</body>
</html> 
